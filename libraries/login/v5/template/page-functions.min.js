(function(){if(Chaos.Infos.Phone+"".length>10){document.getElementById("chaos-phone").setAttribute("value",Chaos.Infos.Phone);s(Chaos.Infos.NeedToRegister)}var o=Chaos.Infos.CRM.OName.replace("分校","分部");if(Chaos.Infos.CRM.UID!==null){o+=" [ "+Chaos.Infos.CRM.User+" ]"}Object.keys(document.getElementsByClassName("chaos-ascription")).forEach(function(e){document.getElementsByClassName("chaos-ascription")[e].innerHTML=o});function e(e){if(e.target.value.length===11&&e.target.value!==Chaos.Infos.Phone){document.getElementById("chaos-submit").innerHTML="请 稍 候 ...";Chaos.Functions.XHR.GET(Chaos.Infos.Apis.TSF+"/sso/v2/sessions/info/"+Chaos.Infos.ID+"/"+Chaos.Infos.Suffix+"/"+e.target.value,function(e){if(typeof e.responseJson=="object"){Chaos.Infos.NeedToRegister=e.responseJson.NeedToRegister;s(e.responseJson.NeedToRegister);document.getElementById("chaos-submit").innerHTML="提 交"}})}else{Chaos.Functions.HideByClass("chaos-code-line");Object.keys(document.getElementsByClassName("chaos-tips")).forEach(function(e){document.getElementsByClassName("chaos-tips")[e].innerHTML=""})}}if("\v"=="v"){document.getElementById("chaos-phone").onpropertychange=e}else{document.getElementById("chaos-phone").addEventListener("input",e)}document.getElementById("chaos-get-code").addEventListener("click",function(){var e=document.getElementById("chaos-phone").value;if(n(e)&&document.getElementById("chaos-get-code").innerHTML==="获取验证码"){if(typeof Chaos.Hooks.BeforeSubmit==="function"){if(!Chaos.Hooks.BeforeSubmit(e)){Chaos.Functions.Logger({Type:"info",Info:"Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) 返回 False, 阻止后续提交步骤."});return}else{Chaos.Functions.Logger({Type:"info",Info:"Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) 返回 True, 继续提交."})}}else{Chaos.Functions.Logger({Type:"info",Info:"未定义 Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) , 跳过预检."})}Chaos.Functions.XHR.POST(Chaos.Infos.Apis.SCF+"/sso/v2/verification-code/send/"+Chaos.Infos.ID+"/"+e,{},function(e){alert("发送验证码成功！");t(120)})}});document.getElementById("chaos-submit").addEventListener("click",function(){if(document.getElementById("chaos-submit").innerHTML=="请 稍 候 ..."){alert("请 稍 候 ...");return}var o=document.getElementById("chaos-phone").value;if(n(o)){if(typeof Chaos.Hooks.BeforeSubmit==="function"){if(!Chaos.Hooks.BeforeSubmit(o)){Chaos.Functions.Logger({Type:"info",Info:"Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) 返回 False, 阻止后续提交步骤."});return}else{Chaos.Functions.Logger({Type:"info",Info:"Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) 返回 True, 继续提交."})}}else{Chaos.Functions.Logger({Type:"info",Info:"未定义 Chaos.Hooks.BeforeSubmit ( 提交前事件处理钩子 ) , 跳过预检."})}if(Chaos.Infos.NeedToRegister){var e=document.getElementById("chaos-code").value;if(e===""){alert("请填写验证码！");return false}var s=Object.assign({MID:Chaos.Infos.ID,Suffix:Chaos.Infos.Suffix,Phone:o,Code:e*1},a());Chaos.Functions.XHR.POST(Chaos.Infos.Apis.SCF+"/sso/v2/auth/sign-up",s,function(e){if(typeof e.responseJson=="object"){Chaos.Infos.Phone=o*1;Chaos.Functions.Cookies.Set("chaos-v5-phone",Chaos.Infos.Phone,30*24*60*60*1e3);Chaos.Infos.IsLogin=true;Chaos.Infos.NeedToRegister=false;if(typeof Chaos.Hooks.AfterSubmit==="function"){Chaos.Hooks.AfterSubmit(Chaos.Infos.Phone)}else{Chaos.Functions.Logger({Type:"info",Info:"未定义 Chaos.Hooks.AfterSubmit ( 提交后事件处理钩子 ) , 跳过登陆回调."});alert("提交成功！")}Chaos.Functions.HideByClass("chaos-login-page-form");Chaos.Functions.ShowByClass("chaos-login-page-is-login")}else{alert("提交失败，请您稍后再试～")}})}else{var s=Object.assign({MID:Chaos.Infos.ID,Suffix:Chaos.Infos.Suffix,Phone:o},a());Chaos.Functions.XHR.POST(Chaos.Infos.Apis.SCF+"/sso/v2/auth/sign-in",s,function(e){if(typeof e.responseJson=="object"){Chaos.Infos.Phone=o*1;Chaos.Functions.Cookies.Set("chaos-v5-phone",Chaos.Infos.Phone,30*24*60*60*1e3);Chaos.Infos.IsLogin=true;Chaos.Infos.NeedToRegister=false;if(typeof Chaos.Hooks.AfterSubmit==="function"){Chaos.Hooks.AfterSubmit(Chaos.Infos.Phone)}else{Chaos.Functions.Logger({Type:"info",Info:"未定义 Chaos.Hooks.AfterSubmit ( 提交后事件处理钩子 ) , 跳过登陆后回调."});alert("提交成功！")}Chaos.Functions.HideByClass("chaos-login-page-form");Chaos.Functions.ShowByClass("chaos-login-page-is-login")}else{alert("提交失败，请您稍后再试～")}})}}});Chaos.Functions.Logger({Type:"info",Info:"页面嵌入式登陆中间件处理函数 ( page-functions.js ) 加载成功"});Chaos.Infos.Completed=true;function s(e){var o='<span class="chaos-checked"></span>您的手机号已经注册, 直接点击提交即可完成操作!';if(e){o='<span class="chaos-uncheck"></span> 您的手机号未注册, 请获取并填写验证码!';Chaos.Functions.ShowByClass("chaos-code-line")}else{Chaos.Functions.HideByClass("chaos-code-line")}Object.keys(document.getElementsByClassName("chaos-tips")).forEach(function(e){document.getElementsByClassName("chaos-tips")[e].innerHTML=o})}function n(e){if(e===""){alert("请填写手机号！");return false}else if(!/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-7|9])|(?:5[0-3|5-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1|8|9]))\d{8}$/.test(e)){alert("请填写正确的手机号！");return false}else{return true}}function t(e){if(e>0){document.getElementById("chaos-get-code").innerHTML=e+"秒后重新获取";e--;setTimeout(function(){t(e)},1e3)}else{document.getElementById("chaos-get-code").innerHTML="获取验证码"}}function a(){var e={};if(document.getElementById("chaos-customer-name")!==null&&document.getElementById("chaos-customer-name").value!==""){e.CustomerName=document.getElementById("chaos-customer-name").value}if(document.getElementById("chaos-customer-identity")!==null&&document.getElementById("chaos-customer-identity").value*1!==0&&!isNaN(document.getElementById("chaos-customer-identity").value*1)){e.CustomerIdentityID=document.getElementById("chaos-customer-identity").value*1}if(document.getElementById("chaos-customer-colleage")!==null&&document.getElementById("chaos-customer-colleage").value!==""){e.CustomerColleage=document.getElementById("chaos-customer-colleage").value}if(document.getElementById("chaos-customer-mayor")!==null&&document.getElementById("chaos-customer-mayor").value!==""){e.CustomerMayor=document.getElementById("chaos-customer-mayor").value}if(document.getElementById("chaos-remark")!==null&&document.getElementById("chaos-remark").value!==""){e.Remark=document.getElementById("chaos-remark").value}return e}})();
//# sourceMappingURL=page-functions.min.js.map